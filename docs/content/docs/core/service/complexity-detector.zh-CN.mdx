---
title: ComplexityDetector 复杂度检测器
icon: Gauge
relatedFile: app/src/core/service/dataManageService/ComplexityDetector.tsx
---

该服务用于对项目中的舞台场景进行全面的复杂度分析和统计。它通过检测舞台上各种元素的数量、属性和相互关系，生成详细的统计报告，帮助用户理解当前场景的复杂程度和结构特征。

## 文本内容统计

- **文本节点字数统计**: 统计所有文本节点中的总字数。
- **关联关系字数统计**: 统计所有关联关系（如连线）中的总字数。
- **实体详情字数统计**: 统计所有实体详情中的总字数。
- **平均文本节点字数**: 计算每个文本节点的平均字数。
- **文本字符大小**: 统计文本字符的总大小（可能指渲染尺寸或字符数）。

## 实体数量统计

- **实体总数**: 统计舞台上所有实体的总数量。
- **分区数量**: 统计舞台上的分区（Section）数量。
- **文本节点数量**: 统计舞台上的文本节点数量。
- **画笔笔触数量**: 统计舞台上的画笔笔触数量。
- **图片数量**: 统计舞台上的图片数量。
- **URL节点数量**: 统计舞台上的URL节点数量。
- **连接点数量**: 统计舞台上的连接点数量。
- **孤立连接点数量**: 统计舞台上未连接任何实体的孤立连接点数量。

## 颜色统计

- **非透明实体颜色数量**: 统计非透明实体的颜色种类数量。
- **透明实体颜色数量**: 统计透明实体的颜色种类数量。
- **实体颜色类型数量**: 统计所有实体使用的不同颜色类型数量。
- **非透明边颜色数量**: 统计非透明连线的颜色种类数量。
- **透明边颜色数量**: 统计透明连线的颜色种类数量。
- **边颜色类型数量**: 统计所有连线使用的不同颜色类型数量。

## 舞台尺寸

- **舞台宽度**: 舞台的当前宽度。
- **舞台高度**: 舞台的当前高度。
- **舞台面积**: 舞台的当前面积。

## 图论分析

- **关联关系总数**: 统计舞台上所有关联关系（边）的总数量。
- **自环数量**: 统计连接到自身实体的自环数量。
- **孤立可连接实体数量**: 统计舞台上未与其他实体建立连接的可连接实体数量。
- **多重边数量**: 统计实体之间存在多条边的数量。

## 布局与重叠

- **实体密度**: 计算舞台上实体的密度。
- **实体重叠数量**: 统计舞台上实体之间存在重叠的数量。

## 集合论分析

- **交叉实体数量**: 统计同时属于多个分区的实体数量。
- **最大分区深度**: 统计分区嵌套的最大深度。
- **空集数量**: 统计不包含任何子实体的空分区数量。

## API

## `detectorCurrentStage(): CountResultObject`

执行当前舞台的复杂度检测，并返回一个包含各种统计结果的 `CountResultObject` 对象。该方法会统计文本字数、实体数量、颜色使用情况、舞台尺寸、图论特征以及集合论相关指标。
