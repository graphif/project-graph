# 快捷键冲突检测和提醒功能实现计划

## 1. 功能需求分析

- 在快捷键设置页面中，为每个快捷键添加冲突检测
- 当快捷键重复时，显示警告色提示并说明与多少个快捷键冲突
- 点击提示可以查看具体与哪一个快捷键冲突
- 没有冲突时不显示任何内容，不占用额外视觉空间

## 2. 实现方案

### 2.1 添加冲突检测函数

- 在 `KeyBindsPage` 组件中添加 `detectKeyConflicts` 函数
- 该函数接收一个快捷键值，返回与该快捷键冲突的所有快捷键信息
- 冲突检测逻辑：检查所有启用的快捷键，找出具有相同键值的项

### 2.2 修改快捷键设置项渲染

- 修改 `renderKeyFields` 函数，为每个快捷键设置项添加冲突检测
- 当检测到冲突时，在 `Field` 组件下方添加冲突提示元素
- 冲突提示元素使用警告色样式，显示冲突数量

### 2.3 添加冲突详情对话框

- 添加一个对话框组件，用于显示冲突的快捷键详情
- 当用户点击冲突提示时，打开对话框并列出所有冲突的快捷键
- 对话框中显示冲突快捷键的名称、当前键值和所属分组

### 2.4 优化用户体验

- 实时检测：当用户修改快捷键时，立即更新冲突状态
- 视觉反馈：使用明显的警告色和图标，让用户快速识别冲突
- 交互便捷：点击提示即可查看详情，无需额外操作

## 3. 技术实现要点

### 3.1 冲突检测逻辑

```typescript
const detectKeyConflicts = (targetKey: string, targetId: string) => {
  return data.filter((item) => item.key === targetKey && item.id !== targetId && item.isEnabled);
};
```

### 3.2 冲突提示组件

- 使用 `Badge` 或自定义元素显示冲突数量
- 添加点击事件处理函数，打开详情对话框
- 应用适当的样式，确保警告效果明显

### 3.3 对话框实现

- 使用现有的 `Dialog` 组件
- 动态生成冲突列表，显示每个冲突快捷键的详细信息
- 添加关闭按钮，确保用户可以方便地关闭对话框

## 4. 具体修改文件

- `/Volumes/移动固态1/project-graph-1/app/src/sub/SettingsWindow/keybinds.tsx`：主修改文件，添加冲突检测和提醒功能

## 5. 预期效果

- 用户在设置快捷键时，能够实时看到冲突提示
- 点击提示可以查看具体冲突的快捷键，便于调整
- 界面简洁，没有冲突时不显示额外元素，保持原有布局美观
