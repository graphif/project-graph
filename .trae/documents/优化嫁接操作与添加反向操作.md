# 优化嫁接操作与添加反向操作

## 1. 优化嫁接操作（insertNodeToTree）

**问题**：当前嫁接操作创建的新连线总是使用默认的中心点连接，没有保持原连线的方向。

**解决方案**：

- 修改 `TextNodeSmartTools.insertNodeToTree` 方法
- 保存原碰撞连线的 `sourceRectangleRate` 和 `targetRectangleRate` 属性
- 在创建新连线时使用这些属性，保持原连线的方向
- 对于向右的连线，确保新连线从源头右侧发出，目标左侧接收

## 2. 实现反向操作（removeNodeFromTree）

**功能**：将选中的节点从树中移除，并重新连接其前后节点。

**实现步骤**：

- 在 `TextNodeSmartTools` 命名空间中添加 `removeNodeFromTree` 方法
- 逻辑：
  1. 检查选中节点数量（必须为1）
  2. 找到选中节点的所有入边和出边
  3. 删除这些边
  4. 将入边的源节点直接连接到出边的目标节点
  5. 删除选中的节点
  6. 记录操作历史

## 3. 添加快捷键

**快捷键设置**：

- 嫁接操作：`1 e`
- 摘除操作：`1 r`

**实现**：在 `shortcutKeysRegister.tsx` 中添加两个新的快捷键注册：

- 嫁接：`id: "graftNodeToTree", defaultKey: "1 e"`
- 摘除：`id: "removeNodeFromTree", defaultKey: "1 r"`

## 4. 新增快捷键分类

**分类设置**：

- 名称："node"（节点相关）
- 图标：`<Network />`
- 包含快捷键：`["graftNodeToTree", "removeNodeFromTree"]`

**实现**：在 `keybinds.tsx` 的 `shortcutKeysGroups` 数组中添加新分类。

## 5. 文件修改清单

1. `textNodeSmartTools.tsx`：
   - 优化 `insertNodeToTree` 方法
   - 添加 `removeNodeFromTree` 方法

2. `shortcutKeysRegister.tsx`：
   - 注册两个新快捷键

3. `keybinds.tsx`：
   - 添加新的快捷键分类

4. `locales/zh_CN.yml`（可选）：
   - 添加新快捷键的国际化标题和描述

## 6. 预期效果

- 嫁接操作：保持原连线方向，特别是向右的连线会从源头右侧发出，目标左侧接收
- 摘除操作：快速将节点从树中移除，自动重新连接前后节点
- 快捷键：方便的 "1 e" 和 "1 r" 组合键
- 快捷键分类：更清晰的快捷键管理，新分类 "节点相关" 包含这两个操作
