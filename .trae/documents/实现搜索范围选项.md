# 实现搜索范围选项

## 需求分析

需要在搜索功能中添加两个搜索范围选项：

1. 只搜索所有选中的内容（选中的节点）
2. 只搜索所有选中内容的外接矩形范围内的所有实体

## 实现思路

1. **修改搜索引擎核心**
   - 在`ContentSearch`类中添加搜索范围枚举和相关属性
   - 修改`startSearch`方法，根据搜索范围过滤搜索对象
   - 添加获取选中对象外接矩形的方法

2. **增强搜索面板UI**
   - 在`FindWindow`中添加搜索范围选择控件
   - 实现UI与搜索引擎的状态同步
   - 添加相应的图标和提示

3. **实现搜索范围逻辑**
   - 实现"只搜索选中内容"逻辑：过滤出选中的对象进行搜索
   - 实现"搜索外接矩形范围"逻辑：计算选中对象的外接矩形，然后搜索该范围内的所有对象

## 实现步骤

1. **修改`contentSearchEngine.tsx`**
   - 添加`SearchScope`枚举类型
   - 在`ContentSearch`类中添加`searchScope`属性
   - 修改`startSearch`方法，根据搜索范围过滤搜索对象
   - 添加`getSelectedObjectsBounds`方法，计算选中对象的外接矩形
   - 添加`isObjectInBounds`方法，判断对象是否在指定范围内

2. **修改`FindWindow.tsx`**
   - 添加搜索范围状态管理
   - 在UI中添加搜索范围选择按钮
   - 实现搜索范围切换逻辑
   - 同步UI状态到搜索引擎

3. **测试验证**
   - 测试不同搜索范围下的搜索结果
   - 验证UI控件的交互和状态显示
   - 确保原有功能不受影响

## 文件修改

- `app/src/core/service/dataManageService/contentSearchEngine/contentSearchEngine.tsx`
- `app/src/sub/FindWindow.tsx`
